{"version":3,"file":"js/94.1037348d.js","mappings":"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","sources":["webpack://sixth/./node_modules/mitt/dist/mitt.mjs","webpack://sixth/./src/libs/emitter.js","webpack://sixth/./src/views/ProductsView.vue","webpack://sixth/./src/views/ProductsView.vue?91db"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\r\n\r\nconst emitter = mitt()\r\n\r\nexport default emitter\r\n","<template>\r\n    <h2 class=\"text-center py-3\">產品列表</h2>\r\n    <div class=\"container\">\r\n      <div class=\"row row-cols-1 row-cols-md-3 g-3\"><!-- row決定內層數量 -->\r\n        <div class=\"col\" v-for=\"product in products\" :key=\"product.id\">\r\n          <div class=\"card h-100\">\r\n            <img :src=\"product.imageUrl\" class=\"card-img-top\" alt=\"...\" style=\"height:300px; object-fit:cover;\">\r\n            <div class=\"card-body d-flex flex-column justify-content-between\">\r\n              <h5 class=\"card-title\">{{product.title}}</h5>\r\n              <p class=\"card-text\">{{product.description}}</p>\r\n              <div class=\"d-flex\">\r\n                <router-link :to=\"`/product/${product.id}`\" class=\"btn btn-outline-primary w-100 me-2\">查看詳情</router-link>\r\n                <div class=\"btn btn-primary w-100\" @click=\"addToCart(product.id)\"\r\n                    :disabled=\"isLoadingItem === product.id\">\r\n                    <span v-show=\"isLoadingItem === product.id\"><i class=\"fas fa-spinner fa-pulse\"></i></span>\r\n                    加入購物車</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport emitter from '@/libs/emitter.js'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      isLoadingItem: ''\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\r\n        .then((res) => {\r\n          // console.log(res)\r\n          this.products = res.data.products\r\n        }).catch((err) => {\r\n          console.log('123', err)\r\n        })\r\n    },\r\n    // 加入購物車\r\n    addToCart (id, qty = 1) {\r\n      // 判斷loading的時機\r\n      this.isLoadingItem = id\r\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, {\r\n        data: {\r\n          product_id: id,\r\n          qty: qty\r\n        }\r\n      })\r\n        .then((res) => {\r\n          this.isLoadingItem = ''\r\n          this.getProducts()\r\n          emitter.emit('get-cart-list')\r\n          alert(res.data.message)\r\n        }).catch((err) => {\r\n          alert(err.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductsView.vue?vue&type=template&id=9e5b8c22\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\徐姿茵\\\\Desktop\\\\sixth\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","_createElementVNode","class","_hoisted_12","_hoisted_1","_createElementBlock","_Fragment","_renderList","$data","product","key","id","src","imageUrl","alt","style","_toDisplayString","title","description","_createVNode","_component_router_link","to","onClick","$options","disabled","_hoisted_13","data","products","isLoadingItem","methods","getProducts","this","$http","then","res","catch","err","console","log","addToCart","qty","post","product_id","alert","message","mounted","__exports__","render"],"sourceRoot":""}